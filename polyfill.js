!function(){"use strict";!function(){if(!function(){try{return customElements.define("corpuscule-cbe-detector",document.createElement("p").constructor,{extends:"p"}),!0}catch(e){return!1}}()){var e,t,n,r,o,i=function(){function e(){this.listeners={},this.registry={},this.reversed=new WeakMap}var t=e.prototype;return t.get=function(e){return"string"==typeof e?this.registry[e]:this.reversed.get(e)},t.has=function(e){return"string"==typeof e?!!this.registry[e]:this.reversed.has(e)},t.set=function(e,t){var n=this.listeners,r=this.registry,o=this.reversed;if(r[e]=t,o.set(t,e),n[e]){for(var i=0,a=n[e].length;i<a;i++)n[e][i]();n[e]=null}},t.whenDefined=function(e){var t=this;return new Promise(function(n){var r=t.listeners;t.registry[e]?n():r[e]?r[e].push(n):r[e]=[n]})},e}(),a="ShadowRoot"in window&&!("ShadyCSS"in window&&!window.ShadyCSS.nativeShadow),s=new i,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,h=new WeakMap,p=/\bis=(["'])?[a-z0-9_-]+\1/i,f="attributeChangedCallback",m="connectedCallback",g="disconnectedCallback",v=["Anchor","Area","Audio","Base","Quote","Body","BR","Button","Canvas","TableCaption","TableCol","Data","DataList","Mod","Details","Dialog","Div","DList","Embed","FieldSet","Form","Heading","Head","HR","Html","IFrame","Image","Input","Unknown","Label","Legend","LI","Link","Map","Menu","Meta","Meter","Object","OList","OptGroup","Option","Output","Paragraph","Param","Pre","Progress","Script","Select","Source","Span","Style","Table","TableSection","TableCell","Template","TextArea","Time","Title","TableRow","Track","UList","Video"],y=Object.defineProperties,w=Object.defineProperty,E=Object.getOwnPropertyDescriptor,b=Object.getPrototypeOf,M=Object.setPrototypeOf,T=function(e,t){return a&&t&&e.shadowRoot},_="Failed to execute 'define' on 'CustomElementRegistry'",S=/-/;v.forEach(function(e){var t="HTML"+e+"Element",n=window[t],r=function(){var e,t=this.constructor;if(!s.has(t))throw new TypeError("Illegal constructor");if(u.has(t))e=u.get(t),u.delete(t);else{var n=c.get(t);e=document.createElement(n)}M(e,t.prototype),e.constructor=t;var r=t.observedAttributes;return r&&r.length>0&&new MutationObserver(R).observe(e,{attributeFilter:r,attributeOldValue:!0,attributes:!0}),e};w(r,Symbol.hasInstance,{configurable:!0,value:function(e){return this===r?n.prototype.isPrototypeOf(e):this.prototype.isPrototypeOf(e)}}),l.set(r,n),window[t]=r}),e=customElements,t=e.define,n=e.get,r=e.upgrade,o=e.whenDefined,y(customElements,{define:{configurable:!0,value:function(e,n,r){if(r&&r.extends){if(s.has(e))throw new Error(_+': the name "'+e+'" has already been used with this registry');if(s.has(n))throw new Error(_+": this constructor has already been used with this registry");if(!S.test(e))throw new Error(_+': "'+e+'" is not a valid custom element name');var o=L(n.prototype),i=o[o.length-1],a=o[o.length-2],u=l.get(i.constructor);d.has(a)||(M(a,u.prototype),d.set(a,0)),s.set(e,n),c.set(n,r.extends);var h=new RegExp(r.extends,"i");O(document.body,function(t){return h.test(t.tagName)&&t.getAttribute("is")===e},function(e){D(e),H(e)},!0)}else t.apply(customElements,arguments)}},get:{configurable:!0,value:function(e){return s.get(e)||n.call(customElements,e)}},upgrade:{configurable:!0,value:function(e){N(e)?D(e):r.call(customElements,e)}},whenDefined:{configurable:!0,value:function(e){return Promise.race([o.call(customElements,e),s.whenDefined(e)])}}}),function(){var e=document.createElement;if(document.createElement=function(t,n){return n&&n.is&&s.has(n.is)?new(s.get(n.is)):e.apply(document,arguments)},a){var t=HTMLElement.prototype.attachShadow;HTMLElement.prototype.attachShadow=function(){var e=t.apply(this,arguments);return A(e),e}}I(Document.prototype,"importNode"),I(Node.prototype,"cloneNode");var n="innerHTML"in Element.prototype?Element.prototype:HTMLElement.prototype,r=n.insertAdjacentHTML;n.insertAdjacentHTML=function(e,t){r.apply(this,arguments),p.test(t)&&O(this,N,D)},F(n),a&&F(ShadowRoot.prototype)}(),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",j):j()}function L(e){for(var t=[e],n=e;;){if((n=b(n))===Object.prototype||n===HTMLElement.prototype)return t;t.push(n)}}function O(e,t,n,r){void 0===r&&(r=!1);for(var o,i=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT,function(e){return t(e)||T(e,r)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},null,!1);o=i.nextNode();)T(o,r)?O(o.shadowRoot,t,n,r):n(o)}function N(e){var t=e.getAttribute("is");return t&&s.get(t)}function C(e){var t=e.constructor;return s.has(t)&&t}function D(e){var t=N(e);u.set(t,e),new t}function H(e){m in e&&h.get(e)!==m&&(e[m](),h.set(e,m))}function P(e){g in e&&h.get(e)!==g&&(e[g](),h.set(e,g))}function k(e){for(var t=0,n=e.length;t<n;t++){for(var r=e[t],o=r.addedNodes,i=r.removedNodes,a=0,s=o.length;a<s;a++)("isConnected"in(l=o[a])?l.isConnected:document.body.contains(l))&&O(o[a],C,H,!0);for(var c=0,u=i.length;c<u;c++)O(i[c],C,P,!0)}var l}function A(e){new MutationObserver(k).observe(e,{childList:!0,subtree:!0})}function R(e){for(var t=0,n=e.length;t<n;t++){var r=e[t],o=r.attributeName,i=r.oldValue,a=r.target;a[f]&&a[f](o,i,a.getAttribute(o))}}function I(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return e.nodeType!==Node.ELEMENT_NODE&&e.nodeType!==Node.DOCUMENT_FRAGMENT_NODE||O(e.content||e,N,D),e}}function F(e){var t=E(e,"innerHTML"),n=t.get,r=t.set;w(e,"innerHTML",{configurable:!0,get:n,set:function(e){r.call(this,e),p.test(e)&&O(this,N,D)}})}function j(){A(document.body)}}(),function(e){var t=[];function n(n){var r=this,o="$BroadcastChannel$"+(n=String(n))+"$";t[o]=t[o]||[],t[o].push(this),this._name=n,this._id=o,this._closed=!1,this._mc=new MessageChannel,this._mc.port1.start(),this._mc.port2.start(),e.addEventListener("storage",function(t){if(t.storageArea===e.localStorage&&null!=t.newValue&&""!==t.newValue&&t.key.substring(0,o.length)===o){var n=JSON.parse(t.newValue);r._mc.port2.postMessage(n)}})}n.prototype={get name(){return this._name},postMessage:function(n){var r=this;if(this._closed){var o=new Error;throw o.name="InvalidStateError",o}var i=JSON.stringify(n),a=this._id+String(Date.now())+"$"+String(Math.random());e.localStorage.setItem(a,i),setTimeout(function(){e.localStorage.removeItem(a)},500),t[this._id].forEach(function(e){e!==r&&e._mc.port2.postMessage(JSON.parse(i))})},close:function(){if(!this._closed){this._closed=!0,this._mc.port1.close(),this._mc.port2.close();var e=t[this._id].indexOf(this);t[this._id].splice(e,1)}},get onmessage(){return this._mc.port1.onmessage},set onmessage(e){this._mc.port1.onmessage=e},addEventListener:function(){return this._mc.port1.addEventListener.apply(this._mc.port1,arguments)},removeEventListener:function(){return this._mc.port1.removeEventListener.apply(this._mc.port1,arguments)},dispatchEvent:function(){return this._mc.port1.dispatchEvent.apply(this._mc.port1,arguments)}},e.BroadcastChannel=e.BroadcastChannel||n}(self)}();
