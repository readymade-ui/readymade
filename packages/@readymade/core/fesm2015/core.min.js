class t{constructor(t,s){this.target=t,this.channels={default:new BroadcastChannel("default")},s&&this.setChannel(s),this.events={}}get(t){return this.events[t]}set(t,s){return this.events[t]=s,this.get(t)}emit(t){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t)}broadcast(t,s){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t);const i={bubbles:t.bubbles,cancelBubble:t.cancelBubble,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,detail:t.detail,timeStamp:t.timeStamp,type:t.type};s?this.channels[s].postMessage(i):this.channels.default.postMessage(i)}setChannel(t){this.channels[t]=new BroadcastChannel(t),this.channels[t].onmessage=s=>{for(const i in this.target.elementMeta.eventMap)i.includes(t)&&i.includes(s.data.type)&&this.target[this.target.elementMeta.eventMap[i].handler](s.data)}}removeChannel(t){this.channels[t].close(),delete this.channels[t]}}function s(t,s){const i=t.attachShadow(s||{}),e=document.createElement("template");e.innerHTML=t.template,i.appendChild(e.content.cloneNode(!0)),t.bindTemplate()}function i(t,s){const i=document.createElement("template");i.innerHTML=t.elementMeta.template,t.appendChild(i.content.cloneNode(!0)),t.bindTemplate()}function e(t,s){const i=""+t.elementMeta.selector;if(!document.getElementById(i+"-x")){const s=document.createElement("style");s.setAttribute("id",i+"-x"),s.innerText=t.elementMeta.style,s.innerText=s.innerText.replace(/:host/gi,`[is=${i}]`),document.head.appendChild(s)}}const n=/\[(\w+)\]/g,r=/^\./,h=/\{\{(\s*)(.*?)(\s*)\}\}/g,o=new RegExp("\\[","gi"),d=new RegExp("\\]","gi"),c=function(t,s){const i=(s=(s=s.replace(n,".$1")).replace(r,"")).split(".");for(let s=0,e=i.length;s<e;++s){const e=i[s];if(!(e in t))return;t=t[e]}return t};class l{constructor(t){this.$flatMap={},this.$parent=t,this.$flatMap={},this.$parentId=function(){let t="";const s="abcdefghijklmnopqrstuvwxyz";for(;t.length<3;)t+=s[Math.floor(Math.random()*s.length)];return t}()}setNode(t,s,i){const e=this.$parentId+"-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const s=16*Math.random()|0;return("x"==t?s:3&s|8).toString(24)})).slice(0,6),n=t.cloneNode(!0);t.setAttribute||(t.setAttribute=function(t,s){}),t.setAttribute(e,""),n.setAttribute||(n.setAttribute=function(t,s){}),n.setAttribute(e,""),this.$flatMap[e]||(this.$flatMap[e]={id:e,node:n},s&&i&&this.updateNode(t,s,i)),t.$init=!0}changeNode(t,s,i){s=(s=s.replace(o,"\\[")).replace(d,"\\]");const e=new RegExp(`{{(s*)(${s})(s*)}}`,"gi"),n=this.getElementByAttribute(t)[0].nodeName||this.getElementByAttribute(t)[0].name,r=this.$flatMap[n].node;if(r.textContent.match(e)&&(t.textContent=r.textContent.replace(e,i)),1===r.attributes.length)return;let c;for(const s of r.attributes){if(c=s.nodeName||s.name,c.includes("attr.")&&!r.getAttribute(c.replace("attr.",""))){s.nodeName?c=s.nodeName.replace("attr.",""):s.name&&(c=s.name.replace("attr.","")),r.setAttribute||(r.setAttribute=function(t,s){}),r.setAttribute(c,s.nodeValue.replace(h,""));const i=s.nodeName||s.name;t.removeAttribute(i)}const n=s.nodeValue||s.value;n.match(e,"gi")&&(t.setAttribute||(t.setAttribute=function(t,s){}),t.setAttribute(c,n.replace(e,i)));const o=s.nodeName||s.name;o.includes("attr.")&&t.removeAttribute(o)}}updateNode(t,s,i){var e;if(0!==this.getElementByAttribute(t).length)if(Array.isArray(i))for(let e=0;e<i.length;e++)this.changeNode(t,`${s}[${e}]`,i[e]);else if(null===(e=i)||"function"!=typeof e&&"object"!=typeof e)this.changeNode(t,s,i);else for(const e in i)i.hasOwnProperty(e)&&this.changeNode(t,`${s}.${e}`,i[e])}getElementByAttribute(t){if(!t.attributes)return[];for(let s=0;s<t.attributes.length;s++)if(/[A-Za-z0-9]{3}-[A-Za-z0-9]{6}/gm.test(t.attributes[s].nodeName||t.attributes[s].name))return[t.attributes[s]]}update(t,s){const i=document.createTreeWalker(this.$parent,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>NodeFilter.FILTER_ACCEPT},!1);for(;i.nextNode();)!0===i.currentNode.$init?this.updateNode(i.currentNode,t,s):this.setNode(i.currentNode,t,s);return this.$parent}}class a{constructor(t){this.$parent=t,this.$tree=new l(this.$parent)}update(t,s){this.$tree.update(t,s),this.$parent.onUpdate&&this.$parent.onUpdate()}}class b{constructor(t){this.$parent=t}set(t,s,i){const e=new RegExp(h).exec(i),n=!(!e||!e[2])&&e[2],r={[s]:{previousValue:t[s],newValue:i}};return n&&t.parentNode&&t.parentNode.host&&"open"===t.parentNode.mode?t[s]=c(t.parentNode.host,n):n&&t.parentNode?t[s]=c(t.parentNode,n):t[s]=i,this.$parent.$$state["node __state"].update(s,t[s]),t.onStateChange&&t.onStateChange(r),!0}}function m(){this.bindState&&this.bindState()}function u(t,s){!function(t,s,i){const e=s.split("."),n=e.length;for(let s=0;s<n-1;s++){const i=e[s];t[i]||(t[i]={}),t=t[i]}t[e[n-1]]=i}(this.$state,t,s)}function E(t,s){t.style||(t.style=""),t.template||(t.template=""),s.prototype.elementMeta=Object.assign(s.elementMeta?s.elementMeta:{},t),s.prototype.elementMeta.eventMap={},s.prototype.template=`<style>${t.style}</style>${t.template}`,s.prototype.bindTemplate=m,s.prototype.setState=u}function L(t){return t.parentNode}function p(t){const s=t||this;if(!s)return[];const i=function t(s,i=[],e=[]){s.children.length||e.push(i.concat(s));for(const n of s.children)t(n,i.concat(n),e);return e}(s,[]).reduce(((t,s)=>t.concat(s)),[]);return i.filter(((t,s)=>i.indexOf(t)>=s))}function I(t){return Array.from(L(t).children).filter((t=>"TEXT"!==t.tagName&&"STYLE"!==t.tagName))}function x(t){return document.querySelector(t)}function M(t){return Array.from(document.querySelectorAll(t))}function f(t){return I(t).indexOf(t)}const T="$emit",H="$listen",g=(...t)=>t,$=(...t)=>t,y=()=>{};function N(t){if(t)return s=>(E(t,s),void 0===t.autoDefine&&(t.autoDefine=!0),!0===t.autoDefine&&(t.selector&&!t.custom?customElements.define(t.selector,s):t.selector&&t.custom?customElements.define(t.selector,s,t.custom):customElements.define(t.selector,s)),s);console.error("Component must include ElementMeta to compile")}function A(t){return function(t,s,i){function e(){this.$$state=this[s](),this.$$state["handler __state"]=new b(this),this.$$state["node __state"]=new a(this.shadowRoot?this.shadowRoot:this),this.$state=Object.assign(new Proxy(this,this.$$state["handler __state"]),this[s]())}t.bindState=function(){e.call(this)}}}function v(s,i,e){return function(n,r,h){const o=e||"default";let d="";function c(s,e){this.emitter||(this.emitter=new t(this,e)),s&&this.emitter.set(s,new CustomEvent(s,i||{})),e&&!this.emitter.channels[e]&&this.emitter.setChannel(e)}function l(){for(const t in this)t.includes("$emit")&&this[t].call(this)}d=s?"$emit"+o+s:"$emit"+o,n[d]||(n[d]=function(){c.call(this,s,e)}),n.bindEmitters=function(){l.call(this)}}}function C(s,i){return function(e,n,r){const h=Symbol(n);let o="";function d(s,i){const e=this[h]=(...t)=>{r.value.apply(this,t)};this.emitter||(this.emitter=new t(this,i||null)),this.elementMeta.eventMap[o]={key:s,handler:n},this.addEventListener(s,e)}function c(){this.removeEventListener(s,this[h])}function l(){for(const t in this)t.includes("$listen")&&this[t].onListener.call(this)}o=i?"$listen"+s+i:"$listen"+s,e[o]||(e[o]={},e[o].onListener=function(){d.call(this,s,i)},e[o].onDestroyListener=function(){c.call(this,s,i)}),e.bindListeners=function(){l.call(this)}}}class S extends HTMLElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class w extends HTMLElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class B extends HTMLElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class O extends HTMLAllCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class P extends HTMLAnchorElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class R extends HTMLAreaElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class _ extends HTMLAudioElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class D extends HTMLBRElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class F extends HTMLBodyElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class k extends HTMLButtonElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class j extends HTMLCanvasElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class V extends HTMLCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class U extends HTMLDListElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class q extends HTMLDataElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class z extends HTMLDetailsElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class W extends HTMLDivElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Z extends HTMLEmbedElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class G extends HTMLFieldSetElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Q extends HTMLFormControlsCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class X extends HTMLFormElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Y extends HTMLHRElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class J extends HTMLHeadElement{constructor(){super(),this.onInit&&this.onInit()}}class K extends HTMLHeadingElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class tt extends HTMLHtmlElement{constructor(){super(),this.onInit&&this.onInit()}}class st extends HTMLIFrameElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class it extends HTMLImageElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class et extends HTMLInputElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class nt extends HTMLLIElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class rt extends HTMLLabelElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ht extends HTMLLegendElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ot extends HTMLLinkElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class dt extends HTMLMapElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ct extends HTMLMediaElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class lt extends HTMLMenuElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class at extends HTMLMetaElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class bt extends HTMLMeterElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class mt extends HTMLModElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ut extends HTMLOListElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Et extends HTMLObjectElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Lt extends HTMLOptGroupElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class pt extends HTMLOptionElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class It extends HTMLOptionsCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class xt extends HTMLOutputElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Mt extends HTMLParagraphElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ft extends HTMLParamElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Tt extends HTMLPictureElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ht extends HTMLPreElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class gt extends HTMLProgressElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class $t extends HTMLQuoteElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class yt extends HTMLScriptElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Nt extends HTMLSelectElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class At extends HTMLSlotElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class vt extends HTMLSourceElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ct extends HTMLSpanElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class St extends HTMLStyleElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class wt extends HTMLTableCaptionElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Bt extends HTMLTableCellElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ot extends HTMLTableColElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Pt extends HTMLTableElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Rt extends HTMLTableRowElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class _t extends HTMLTableSectionElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Dt extends HTMLTemplateElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ft extends HTMLTimeElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class kt extends HTMLTitleElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class jt extends HTMLTrackElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Vt extends HTMLUListElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ut extends HTMLUnknownElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class qt extends HTMLVideoElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}export{O as AllCollectionComponent,P as AnchorComponent,R as AreaComponent,_ as AudioComponent,D as BRComponent,F as BodyComponent,k as ButtonComponent,j as CanvasComponent,V as CollectionComponent,N as Component,B as CustomElement,U as DListComponent,q as DataComponent,z as DetailsComponent,W as DivComponent,T as EMIT_KEY,Z as EmbedComponent,v as Emitter,t as EventDispatcher,G as FieldSetComponent,X as FormComponent,Q as FormControlsComponent,Y as HRComponent,J as HeadComponent,K as HeadingComponent,tt as HtmlComponent,st as IFrameComponent,it as ImageComponent,et as InputComponent,nt as LIComponent,H as LISTEN_KEY,rt as LabelComponent,ht as LegendComponent,ot as LinkComponent,C as Listen,dt as MapComponent,ct as MediaComponent,lt as MenuComponent,at as MetaComponent,bt as MeterComponent,mt as ModComponent,ut as OListComponent,Et as ObjectComponent,Lt as OptGroupComponent,pt as OptionComponent,It as OptionsCollectionComponent,xt as OutputComponent,Mt as ParagraphComponent,ft as ParamComponent,Tt as PictureComponent,Ht as PreComponent,gt as ProgressComponent,w as PseudoElement,$t as QuoteComponent,yt as ScriptComponent,Nt as SelectComponent,At as SlotComponent,vt as SourceComponent,Ct as SpanComponent,A as State,S as StructuralElement,St as StyleComponent,wt as TableCaptionComponent,Bt as TableCellComponent,Ot as TableColComponent,Pt as TableComponent,Rt as TableRowComponent,_t as TableSectionComponent,Dt as TemplateComponent,Ft as TimeComponent,kt as TitleComponent,jt as TrackComponent,Vt as UListComponent,Ut as UnknownComponent,qt as VideoComponent,i as attachDOM,s as attachShadow,e as attachStyle,m as bindTemplate,E as compileTemplate,$ as css,p as getChildNodes,f as getElementIndex,L as getParent,I as getSiblings,g as html,y as noop,x as querySelector,M as querySelectorAll};
//# sourceMappingURL=core.min.js.map
