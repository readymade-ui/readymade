class t{constructor(t,s){this.target=t,this.channels={default:new BroadcastChannel("default")},s&&this.setChannel(s),this.events={}}get(t){return this.events[t]}set(t,s){return this.events[t]=s,this.get(t)}emit(t){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t)}broadcast(t,s){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t);const i={bubbles:t.bubbles,cancelBubble:t.cancelBubble,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,detail:t.detail,timeStamp:t.timeStamp,type:t.type};s?this.channels[s].postMessage(i):this.channels.default.postMessage(i)}setChannel(t){this.channels[t]=new BroadcastChannel(t),this.channels[t].onmessage=s=>{for(const i in this.target.elementMeta.eventMap)i.includes(t)&&i.includes(s.data.type)&&this.target[this.target.elementMeta.eventMap[i].handler](s.data)}}removeChannel(t){this.channels[t].close(),delete this.channels[t]}}function s(t,s){const i=t.attachShadow(s||{}),e=document.createElement("template");e.innerHTML=t.template,i.appendChild(e.content.cloneNode(!0)),t.bindTemplate()}function i(t,s){const i=document.createElement("template");i.innerHTML=t.elementMeta.template,t.appendChild(i.content.cloneNode(!0)),t.bindTemplate()}function e(t,s){const i=`${t.elementMeta.selector}`;if(!document.getElementById(`${i}-x`)){const s=document.createElement("style");s.setAttribute("id",`${i}-x`),s.innerText=t.elementMeta.style,s.innerText=s.innerText.replace(/:host/gi,`[is=${i}]`),document.head.appendChild(s)}}const n=/\{\{(\s*)(.*?)(\s*)\}\}/g,r=" __state";class h{constructor(t){this.$flatMap={},this.$parent=t,this.$flatMap={},this.$parentId=function(){let t="";const s="abcdefghijklmnopqrstuvwxyz";for(;t.length<3;)t+=s[Math.floor(Math.random()*s.length)];return t}(),this.create()}setNode(t,s,i){const e=this.$parentId+"-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=16*Math.random()|0;return("x"==t?s:3&s|8).toString(24)}).slice(0,6),n=t.cloneNode(!0);t.setAttribute||(t.setAttribute=function(t,s){}),t.setAttribute(e,""),n.setAttribute||(n.setAttribute=function(t,s){}),n.setAttribute(e,""),this.$flatMap[e]||(this.$flatMap[e]={id:e,node:n},s&&i&&this.updateNode(t,s,i))}updateNode(t,s,i){if(0===this.getElementByAttribute(t).length)return;const e=new RegExp(`{{(s*)(${s})(s*)}}`,"gi"),r=this.getElementByAttribute(t)[0].nodeName||this.getElementByAttribute(t)[0].name,h=this.$flatMap[r].node;let o;for(const s of h.attributes){if((o=s.nodeName||s.name).includes("attr.")&&!h.getAttribute(o.replace("attr.",""))){s.nodeName?o=s.nodeName.replace("attr.",""):s.name&&(o=s.name.replace("attr.","")),h.setAttribute||(h.setAttribute=function(t,s){}),h.setAttribute(o,s.nodeValue.replace(n,""));const i=s.nodeName||s.name;t.removeAttribute(i)}const r=s.nodeValue||s.value;r.match(e,"gi")&&(t.setAttribute||(t.setAttribute=function(t,s){}),t.setAttribute(o,r.replace(e,i)));const d=s.nodeName||s.name;d.includes("attr.")&&t.removeAttribute(d)}h.textContent.match(e)&&(t.textContent=h.textContent.replace(e,i))}create(){const t=document.createTreeWalker(this.$parent,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>NodeFilter.FILTER_ACCEPT},!1);for(;t.nextNode();)this.setNode(t.currentNode)}getElementByAttribute(t){return t.attributes?Array.from(t.attributes).filter(t=>/[A-Za-z0-9]{3}-[A-Za-z0-9]{6}/gm.test(t.nodeName||t.name)):[]}update(t,s){const i=document.createTreeWalker(this.$parent,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>NodeFilter.FILTER_ACCEPT},!1);for(;i.nextNode();)this.getElementByAttribute(i.currentNode).length>0?this.updateNode(i.currentNode,t,s):this.setNode(i.currentNode,t,s);return this.$parent}}class o{constructor(t){this.$parent=t,this.$tree=new h(this.$parent)}update(t,s){this.$tree.update(t,s),this.$parent.onUpdate&&this.$parent.onUpdate()}}class d{constructor(t){this.$parent=t}set(t,s,i){const e={[s]:{previousValue:t[s],newValue:i}};return t[s]=i,this.$parent.$$state["node"+r].update(s,t[s]),t.onStateChange&&t.onStateChange(e),!0}}function c(){this.bindState&&this.bindState()}function l(t,s){this.$state[t]=s}function a(t,s){t.style||(t.style=""),t.template||(t.template=""),s.prototype.elementMeta=Object.assign(s.elementMeta?s.elementMeta:{},t),s.prototype.elementMeta.eventMap={},s.prototype.template=`<style>${t.style}</style>${t.template}`,s.prototype.bindTemplate=c,s.prototype.setState=l}function b(t){return t.parentNode}function m(t){const s=t||this;if(!s)return[];const i=function t(s,i=[],e=[]){s.children.length||e.push(i.concat(s));for(const n of s.children)t(n,i.concat(n),e);return e}(s,[]).reduce((t,s)=>t.concat(s),[]);return i.filter((t,s)=>i.indexOf(t)>=s)}function u(t){return Array.from(b(t).children).filter(t=>"TEXT"!==t.tagName&&"STYLE"!==t.tagName)}function E(t){return document.querySelector(t)}function L(t){return Array.from(document.querySelectorAll(t))}function p(t){return u(t).indexOf(t)}const I=(...t)=>t,x=(...t)=>t,M=()=>{};function T(t){if(t)return s=>(a(t,s),s);console.error("Component must include ElementMeta to compile")}function f(t){return function(t,s,i){t.bindState=function(){(function(){this.$$state=this[s](),this.$$state["handler"+r]=new d(this),this.$$state["node"+r]=new o(this.shadowRoot?this.shadowRoot:this),this.$state=new Proxy(this,this.$$state["handler"+r]);for(const t in this.$$state)this.$$state[t]&&!t.includes("__state")&&(this.$state[t]=this.$$state[t])}).call(this)}}}function H(s,i,e){return function(n,r,h){const o=e||"default";let d="";n[d=s?"$emit"+o+s:"$emit"+o]||(n[d]=function(){(function(s,e){this.emitter||(this.emitter=new t(this,e)),s&&this.emitter.set(s,new CustomEvent(s,i||{})),e&&!this.emitter.channels[e]&&this.emitter.setChannel(e)}).call(this,s,e)}),n.bindEmitters=function(){(function(){for(const t in this)t.includes("$emit")&&this[t].call(this)}).call(this)}}}function $(s,i){return function(e,n,r){const h=Symbol(n);let o="";e[o=i?"$listen"+s+i:"$listen"+s]||(e[o]={},e[o].onListener=function(){(function(s,i){const e=this[h]=(...t)=>{r.value.apply(this,t)};this.emitter||(this.emitter=new t(this,i||null)),this.elementMeta.eventMap[o]={key:s,handler:n},this.addEventListener(s,e)}).call(this,s,i)},e[o].onDestroyListener=function(){(function(){this.removeEventListener(s,this[h])}).call(this,s,i)}),e.bindListeners=function(){(function(){for(const t in this)t.includes("$listen")&&this[t].onListener.call(this)}).call(this)}}}class g extends HTMLElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class y extends HTMLElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class A extends HTMLElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class N extends HTMLAllCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class C extends HTMLAnchorElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class v extends HTMLAreaElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class S extends HTMLAudioElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class w extends HTMLBRElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class B extends HTMLBodyElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class O extends HTMLButtonElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class F extends HTMLCanvasElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class P extends HTMLCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class R extends HTMLDListElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class _ extends HTMLDataElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class k extends HTMLDetailsElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class D extends HTMLDivElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class V extends HTMLEmbedElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class U extends HTMLFieldSetElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class W extends HTMLFormControlsCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class j extends HTMLFormElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class q extends HTMLHRElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class z extends HTMLHeadElement{constructor(){super(),this.onInit&&this.onInit()}}class Z extends HTMLHeadingElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class G extends HTMLHtmlElement{constructor(){super(),this.onInit&&this.onInit()}}class Q extends HTMLIFrameElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class X extends HTMLImageElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Y extends HTMLInputElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class J extends HTMLLIElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class K extends HTMLLabelElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class tt extends HTMLLegendElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class st extends HTMLLinkElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class it extends HTMLMapElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class et extends HTMLMediaElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class nt extends HTMLMenuElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class rt extends HTMLMetaElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ht extends HTMLMeterElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ot extends HTMLModElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class dt extends HTMLOListElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ct extends HTMLObjectElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class lt extends HTMLOptGroupElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class at extends HTMLOptionElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class bt extends HTMLOptionsCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class mt extends HTMLOutputElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ut extends HTMLParagraphElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Et extends HTMLParamElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Lt extends HTMLPictureElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class pt extends HTMLPreElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class It extends HTMLProgressElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class xt extends HTMLQuoteElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Mt extends HTMLScriptElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Tt extends HTMLSelectElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ft extends HTMLSlotElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ht extends HTMLSourceElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class $t extends HTMLSpanElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class gt extends HTMLStyleElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class yt extends HTMLTableCaptionElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class At extends HTMLTableCellElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Nt extends HTMLTableColElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ct extends HTMLTableElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class vt extends HTMLTableRowElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class St extends HTMLTableSectionElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class wt extends HTMLTemplateElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Bt extends HTMLTimeElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ot extends HTMLTitleElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ft extends HTMLTrackElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Pt extends HTMLUListElement{constructor(){super(),i(this),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Rt extends HTMLUnknownElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class _t extends HTMLVideoElement{constructor(){super(),e(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}export{N as AllCollectionComponent,C as AnchorComponent,v as AreaComponent,S as AudioComponent,w as BRComponent,B as BodyComponent,O as ButtonComponent,F as CanvasComponent,P as CollectionComponent,T as Component,A as CustomElement,R as DListComponent,_ as DataComponent,k as DetailsComponent,D as DivComponent,V as EmbedComponent,H as Emitter,t as EventDispatcher,U as FieldSetComponent,j as FormComponent,W as FormControlsComponent,q as HRComponent,z as HeadComponent,Z as HeadingComponent,G as HtmlComponent,Q as IFrameComponent,X as ImageComponent,Y as InputComponent,J as LIComponent,K as LabelComponent,tt as LegendComponent,st as LinkComponent,$ as Listen,it as MapComponent,et as MediaComponent,nt as MenuComponent,rt as MetaComponent,ht as MeterComponent,ot as ModComponent,dt as OListComponent,ct as ObjectComponent,lt as OptGroupComponent,at as OptionComponent,bt as OptionsCollectionComponent,mt as OutputComponent,ut as ParagraphComponent,Et as ParamComponent,Lt as PictureComponent,pt as PreComponent,It as ProgressComponent,y as PseudoElement,xt as QuoteComponent,Mt as ScriptComponent,Tt as SelectComponent,ft as SlotComponent,Ht as SourceComponent,$t as SpanComponent,f as State,g as StructuralElement,gt as StyleComponent,yt as TableCaptionComponent,At as TableCellComponent,Nt as TableColComponent,Ct as TableComponent,vt as TableRowComponent,St as TableSectionComponent,wt as TemplateComponent,Bt as TimeComponent,Ot as TitleComponent,Ft as TrackComponent,Pt as UListComponent,Rt as UnknownComponent,_t as VideoComponent,i as attachDOM,s as attachShadow,e as attachStyle,c as bindTemplate,a as compileTemplate,x as css,m as getChildNodes,p as getElementIndex,b as getParent,u as getSiblings,I as html,M as noop,E as querySelector,L as querySelectorAll};
//# sourceMappingURL=core.min.js.map
