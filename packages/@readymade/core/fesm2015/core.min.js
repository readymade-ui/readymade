class t{constructor(t,s){this.target=t,this.channels={default:new BroadcastChannel("default")},s&&this.setChannel(s),this.events={}}get(t){return this.events[t]}set(t,s){return this.events[t]=s,this.get(t)}emit(t){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t)}broadcast(t,s){"string"==typeof t&&(t=this.events[t]),this.target.dispatchEvent(t);const e={bubbles:t.bubbles,cancelBubble:t.cancelBubble,cancelable:t.cancelable,defaultPrevented:t.defaultPrevented,detail:t.detail,timeStamp:t.timeStamp,type:t.type};s?this.channels[s].postMessage(e):this.channels.default.postMessage(e)}setChannel(t){this.channels[t]=new BroadcastChannel(t),this.channels[t].onmessage=s=>{for(const e in this.target.elementMeta.eventMap)e.includes(t)&&e.includes(s.data.type)&&this.target[this.target.elementMeta.eventMap[e].handler](s.data)}}removeChannel(t){this.channels[t].close(),delete this.channels[t]}}function s(t,s){const e=t.attachShadow(s||{}),i=document.createElement("template");i.innerHTML=t.template,e.appendChild(i.content.cloneNode(!0)),t.bindTemplate()}function e(t,s){const e=document.createElement("template");e.innerHTML=t.elementMeta.template,t.appendChild(e.content.cloneNode(!0)),t.bindTemplate()}function i(t,s){const e=`${t.elementMeta.selector}`;if(!document.getElementById(`${e}-x`)){const s=document.createElement("style");s.setAttribute("id",`${e}-x`),s.innerText=t.elementMeta.style,s.innerText=s.innerText.replace(/:host/gi,`[is=${e}]`),document.head.appendChild(s)}}const n=/\{\{(\s*)(.*?)(\s*)\}\}/g,r=" __state",h=function(t){return null!==t&&("function"==typeof t||"object"==typeof t)},o=function(t,s){const e=(s=(s=s.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let s=0,i=e.length;s<i;++s){const i=e[s];if(!(i in t))return;t=t[i]}return t};class d{constructor(t){this.$flatMap={},this.$parent=t,this.$flatMap={},this.$parentId=function(){let t="";const s="abcdefghijklmnopqrstuvwxyz";for(;t.length<3;)t+=s[Math.floor(Math.random()*s.length)];return t}(),this.create()}setNode(t,s,e){const i=this.$parentId+"-"+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const s=16*Math.random()|0;return("x"==t?s:3&s|8).toString(24)}).slice(0,6),n=t.cloneNode(!0);t.setAttribute||(t.setAttribute=function(t,s){}),t.setAttribute(i,""),n.setAttribute||(n.setAttribute=function(t,s){}),n.setAttribute(i,""),this.$flatMap[i]||(this.$flatMap[i]={id:i,node:n},s&&e&&this.updateNode(t,s,e))}changeNode(t,s,e){const i=new RegExp("\\[","gi"),r=new RegExp("\\]","gi");s=(s=s.replace(i,"\\[")).replace(r,"\\]");const h=new RegExp(`{{(s*)(${s})(s*)}}`,"gi"),o=this.getElementByAttribute(t)[0].nodeName||this.getElementByAttribute(t)[0].name,d=this.$flatMap[o].node;if(d.textContent.match(h)&&(t.textContent=d.textContent.replace(h,e)),d.hasAttribute("no-attr"))return;let c;for(const s of d.attributes){if((c=s.nodeName||s.name).includes("attr.")&&!d.getAttribute(c.replace("attr.",""))){s.nodeName?c=s.nodeName.replace("attr.",""):s.name&&(c=s.name.replace("attr.","")),d.setAttribute||(d.setAttribute=function(t,s){}),d.setAttribute(c,s.nodeValue.replace(n,""));const e=s.nodeName||s.name;t.removeAttribute(e)}const i=s.nodeValue||s.value;i.match(h,"gi")&&(t.setAttribute||(t.setAttribute=function(t,s){}),t.setAttribute(c,i.replace(h,e)));const r=s.nodeName||s.name;r.includes("attr.")&&t.removeAttribute(r)}}updateNode(t,s,e){if(0!==this.getElementByAttribute(t).length)if(Array.isArray(e))for(let i=0;i<e.length;i++)this.changeNode(t,`${s}[${i}]`,e[i]);else if(h(e))for(const i in e)e.hasOwnProperty(i)&&this.changeNode(t,`${s}.${i}`,e[i]);else this.changeNode(t,s,e)}create(){const t=document.createTreeWalker(this.$parent,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>NodeFilter.FILTER_ACCEPT},!1);for(;t.nextNode();)this.setNode(t.currentNode)}getElementByAttribute(t){return t.attributes?Array.from(t.attributes).filter(t=>/[A-Za-z0-9]{3}-[A-Za-z0-9]{6}/gm.test(t.nodeName||t.name)):[]}update(t,s){const e=document.createTreeWalker(this.$parent,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>NodeFilter.FILTER_ACCEPT},!1);for(;e.nextNode();)this.getElementByAttribute(e.currentNode).length>0?this.updateNode(e.currentNode,t,s):this.setNode(e.currentNode,t,s);return this.$parent}}class c{constructor(t){this.$parent=t,this.$tree=new d(this.$parent)}update(t,s){this.$tree.update(t,s),this.$parent.onUpdate&&this.$parent.onUpdate()}}class l{constructor(t){this.$parent=t}set(t,s,e){const i=new RegExp(n).exec(e),h=!(!i||!i[2])&&i[2],d={[s]:{previousValue:t[s],newValue:e}};return h&&t.parentNode&&t.parentNode.host&&"open"===t.parentNode.mode?t[s]=o(t.parentNode.host,h):h&&t.parentNode?t[s]=o(t.parentNode,h):t[s]=e,this.$parent.$$state["node"+r].update(s,t[s]),t.onStateChange&&t.onStateChange(d),!0}}function a(){this.bindState&&this.bindState()}function b(t,s){!function(t,s,e){const i=s.split("."),n=i.length;for(let s=0;s<n-1;s++){const e=i[s];t[e]||(t[e]={}),t=t[e]}t[i[n-1]]=e}(this.$state,t,s)}function m(t,s){t.style||(t.style=""),t.template||(t.template=""),s.prototype.elementMeta=Object.assign(s.elementMeta?s.elementMeta:{},t),s.prototype.elementMeta.eventMap={},s.prototype.template=`<style>${t.style}</style>${t.template}`,s.prototype.bindTemplate=a,s.prototype.setState=b}function u(t){return t.parentNode}function E(t){const s=t||this;if(!s)return[];const e=function t(s,e=[],i=[]){s.children.length||i.push(e.concat(s));for(const n of s.children)t(n,e.concat(n),i);return i}(s,[]).reduce((t,s)=>t.concat(s),[]);return e.filter((t,s)=>e.indexOf(t)>=s)}function L(t){return Array.from(u(t).children).filter(t=>"TEXT"!==t.tagName&&"STYLE"!==t.tagName)}function p(t){return document.querySelector(t)}function I(t){return Array.from(document.querySelectorAll(t))}function x(t){return L(t).indexOf(t)}const M=(...t)=>t,T=(...t)=>t,f=()=>{};function H(t){if(t)return s=>(m(t,s),t.selector&&!t.custom?customElements.define(t.selector,s):t.selector&&t.custom?customElements.define(t.selector,s,t.custom):customElements.define(t.selector,s),s);console.error("Component must include ElementMeta to compile")}function g(t){return function(t,s,e){t.bindState=function(){(function(){this.$$state=this[s](),this.$$state["handler"+r]=new l(this),this.$$state["node"+r]=new c(this.shadowRoot?this.shadowRoot:this),this.$state=new Proxy(this,this.$$state["handler"+r]);for(const t in this.$$state)this.$$state[t]&&!t.includes("__state")&&(this.$state[t]=this.$$state[t])}).call(this)}}}function $(s,e,i){return function(n,r,h){const o=i||"default";let d="";n[d=s?"$emit"+o+s:"$emit"+o]||(n[d]=function(){(function(s,i){this.emitter||(this.emitter=new t(this,i)),s&&this.emitter.set(s,new CustomEvent(s,e||{})),i&&!this.emitter.channels[i]&&this.emitter.setChannel(i)}).call(this,s,i)}),n.bindEmitters=function(){(function(){for(const t in this)t.includes("$emit")&&this[t].call(this)}).call(this)}}}function y(s,e){return function(i,n,r){const h=Symbol(n);let o="";i[o=e?"$listen"+s+e:"$listen"+s]||(i[o]={},i[o].onListener=function(){(function(s,e){const i=this[h]=(...t)=>{r.value.apply(this,t)};this.emitter||(this.emitter=new t(this,e||null)),this.elementMeta.eventMap[o]={key:s,handler:n},this.addEventListener(s,i)}).call(this,s,e)},i[o].onDestroyListener=function(){(function(){this.removeEventListener(s,this[h])}).call(this,s,e)}),i.bindListeners=function(){(function(){for(const t in this)t.includes("$listen")&&this[t].onListener.call(this)}).call(this)}}}class N extends HTMLElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class A extends HTMLElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class C extends HTMLElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class v extends HTMLAllCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class S extends HTMLAnchorElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class w extends HTMLAreaElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class B extends HTMLAudioElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class O extends HTMLBRElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class P extends HTMLBodyElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class R extends HTMLButtonElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class F extends HTMLCanvasElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class _ extends HTMLCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class k extends HTMLDListElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class D extends HTMLDataElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class V extends HTMLDetailsElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class j extends HTMLDivElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class U extends HTMLEmbedElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class W extends HTMLFieldSetElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class q extends HTMLFormControlsCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class z extends HTMLFormElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Z extends HTMLHRElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class G extends HTMLHeadElement{constructor(){super(),this.onInit&&this.onInit()}}class Q extends HTMLHeadingElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class X extends HTMLHtmlElement{constructor(){super(),this.onInit&&this.onInit()}}class Y extends HTMLIFrameElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class J extends HTMLImageElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class K extends HTMLInputElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class tt extends HTMLLIElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class st extends HTMLLabelElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class et extends HTMLLegendElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class it extends HTMLLinkElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class nt extends HTMLMapElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class rt extends HTMLMediaElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ht extends HTMLMenuElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ot extends HTMLMetaElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class dt extends HTMLMeterElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ct extends HTMLModElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class lt extends HTMLOListElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class at extends HTMLObjectElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class bt extends HTMLOptGroupElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class mt extends HTMLOptionElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ut extends HTMLOptionsCollection{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Et extends HTMLOutputElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Lt extends HTMLParagraphElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class pt extends HTMLParamElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class It extends HTMLPictureElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class xt extends HTMLPreElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Mt extends HTMLProgressElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Tt extends HTMLQuoteElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class ft extends HTMLScriptElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ht extends HTMLSelectElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class gt extends HTMLSlotElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class $t extends HTMLSourceElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class yt extends HTMLSpanElement{constructor(){super(),s(this,{mode:"open"}),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Nt extends HTMLStyleElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class At extends HTMLTableCaptionElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ct extends HTMLTableCellElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class vt extends HTMLTableColElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class St extends HTMLTableElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class wt extends HTMLTableRowElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Bt extends HTMLTableSectionElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ot extends HTMLTemplateElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Pt extends HTMLTimeElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Rt extends HTMLTitleElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Ft extends HTMLTrackElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class _t extends HTMLUListElement{constructor(){super(),e(this),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class kt extends HTMLUnknownElement{constructor(){super(),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}class Dt extends HTMLVideoElement{constructor(){super(),i(this),this.bindEmitters&&this.bindEmitters(),this.bindListeners&&this.bindListeners(),this.onInit&&this.onInit()}}export{v as AllCollectionComponent,S as AnchorComponent,w as AreaComponent,B as AudioComponent,O as BRComponent,P as BodyComponent,R as ButtonComponent,F as CanvasComponent,_ as CollectionComponent,H as Component,C as CustomElement,k as DListComponent,D as DataComponent,V as DetailsComponent,j as DivComponent,U as EmbedComponent,$ as Emitter,t as EventDispatcher,W as FieldSetComponent,z as FormComponent,q as FormControlsComponent,Z as HRComponent,G as HeadComponent,Q as HeadingComponent,X as HtmlComponent,Y as IFrameComponent,J as ImageComponent,K as InputComponent,tt as LIComponent,st as LabelComponent,et as LegendComponent,it as LinkComponent,y as Listen,nt as MapComponent,rt as MediaComponent,ht as MenuComponent,ot as MetaComponent,dt as MeterComponent,ct as ModComponent,lt as OListComponent,at as ObjectComponent,bt as OptGroupComponent,mt as OptionComponent,ut as OptionsCollectionComponent,Et as OutputComponent,Lt as ParagraphComponent,pt as ParamComponent,It as PictureComponent,xt as PreComponent,Mt as ProgressComponent,A as PseudoElement,Tt as QuoteComponent,ft as ScriptComponent,Ht as SelectComponent,gt as SlotComponent,$t as SourceComponent,yt as SpanComponent,g as State,N as StructuralElement,Nt as StyleComponent,At as TableCaptionComponent,Ct as TableCellComponent,vt as TableColComponent,St as TableComponent,wt as TableRowComponent,Bt as TableSectionComponent,Ot as TemplateComponent,Pt as TimeComponent,Rt as TitleComponent,Ft as TrackComponent,_t as UListComponent,kt as UnknownComponent,Dt as VideoComponent,e as attachDOM,s as attachShadow,i as attachStyle,a as bindTemplate,m as compileTemplate,T as css,E as getChildNodes,x as getElementIndex,u as getParent,L as getSiblings,M as html,f as noop,p as querySelector,I as querySelectorAll};
//# sourceMappingURL=core.min.js.map
